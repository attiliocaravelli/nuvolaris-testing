<domain type='kvm'>
  <name>{{hostname}}</name>
  <memory unit="GiB">{{mem_size}}</memory>
  <currentMemory unit="GiB">{{mem_size}}</currentMemory>
  <vcpu>{{vcpu_num}}</vcpu>
  <os>
    <type arch='x86_64' machine='pc-i440fx-focal'>hvm</type>
    <boot dev='hd' />
  </os>
  <devices>
    <disk type='file' device='disk'>
      <source file='{{virt_dir}}/{{cluster}}/{{cluster}}{{id}}.img' />
      <target dev='vda' bus='virtio' />
    </disk>
    <disk type='file' device='cdrom'>
      <driver name='qemu' type='raw' />
      <source file='{{virt_dir}}/{{cluster}}/{{cluster}}{{id}}.iso' index='1' />
      <target dev='hda' bus='ide' />
      <readonly />
      <address type='drive' controller='0' bus='0' target='0' unit='0' />
    </disk>

    <console type='pty'>
      <target type='serial'/>
    </console>
    <!--
    <serial type='pty'>
      <target port='0' />
    </serial>
    <channel type='unix'>
      <target type='virtio' name='org.qemu.guest_agent.0' />
      <address type='virtio-serial' controller='0' bus='0' port='1' />
    </channel>
    -->
    <input type='mouse' bus='ps2' />
    <input type='keyboard' bus='ps2' />
    <interface type='bridge'>
      <mac address='{{mac_addr}}' />
      <source bridge='virbr1' />
      <target dev='vnet0' />
      <model type='virtio' />
      <alias name='net0' />
      <address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0' />
    </interface>
  </devices>
</domain>